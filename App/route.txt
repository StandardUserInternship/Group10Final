from landetect import detect, LangDetectException

@app.route("/", methods = ["GET", "POST"])
@app.route("/index", methods=["GET", "POST"])
@login_required
def index():
    form = PostForm()
    if form.validate_on_submit():
        try:
            language = detect(form.post.data)
        except LangDetectException:
            language = ""
        post = Post(body=form.post.data, author=current_user,
        language=language)
from flask import render_template, flash, redirect
@app.route('/login', methods=["GET", "POST"])
def login():
    form = loginForm()
    if form.validate_on_submit():
        flash("Login requested for user {}, remember_me={}".format(form.username.data, form.remember_me.data))
        return redirect("/index")
    return render_template("login.html", title="Sign In", form=form)
